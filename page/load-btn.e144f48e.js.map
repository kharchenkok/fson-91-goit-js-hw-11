{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEASMC,EAAO,CACXC,SAAUC,SAASC,eAAe,eAClCC,QAASF,SAASC,eAAe,WACjCE,YAAaH,SAASI,cAAc,iBACpCC,MAAOL,SAASC,eAAe,aAC/BK,aAAcN,SAASI,cAAc,kBAGnCG,EAAO,EAGPC,EAAW,IAAIC,EAAAb,GAAJ,CAAmB,aAAc,CAC9Cc,aAAc,MACdC,aAAc,IACdC,aAAc,mBACdC,eAAgB,GAChBC,UAAW,MAGbhB,EAAKC,SAASgB,iBAAiB,UAS/B,SAAkBC,GAChBA,EAAMC,kBACN,EAAAC,EAAAC,aAAYrB,EAAKI,QAASJ,EAAKK,aAC/B,IAAMiB,EAAQJ,EAAMK,cAAcC,SAASC,YAAYC,MAAMC,OAC7D,IAAKL,GAAmB,MAAVA,EAEZ,YADA,EAAAM,EAAAC,cAAa,QAGfpB,EAAO,GACP,EAAAqB,EAAAC,aAAYT,EAAOb,EA5BL,IA6BXuB,MAAK,SAAAC,GACJjC,EAAKI,QAAQ8B,mBACX,aACA,EAAAd,EAAAe,kBAAiBF,EAAOG,OAE1BH,EAAOI,UAAY,GAAKJ,EAAOG,KAAKE,OAAS,GACzC,EAAAV,EAAAC,cAAa,UAAWI,EAAOI,YAC/B,EAAAT,EAAAC,cAAa,uBAEbI,EAAOI,UAtCD,IAsCwBJ,EAAOG,KAAKE,OAAS,GACrDtC,EAAKK,YAAYkC,UAAUC,QAAQ,YAAa,aAElD9B,EAAS+B,S,IAEVC,OAAM,SAAAC,GACLC,QAAQD,MAAM,0BAA8CA,IACzC,EAAnBf,EAAAC,cAAa,kB,OAlCnB7B,EAAKK,YAAYY,iBAAiB,SAsClC,SAAoB4B,G,IAAAC,EAAAD,EAAEC,OACpBrC,GAAQ,EACRqC,EAAOC,UAAW,EAClB,IAAMzB,EAAQtB,EAAKC,SAASuB,SAASC,YAAYC,MAAMC,OACjDqB,EAAahD,EAAKI,QAAQ6C,kBAChC,IAAKD,EACH,QAGF,EAAAlB,EAAAC,aAAYT,EAAOb,EA1DL,IA2DXuB,MAAK,SAAAC,GACJjC,EAAKI,QAAQ8B,mBACX,aACA,EAAAd,EAAAe,kBAAiBF,EAAOG,OAE1B,IAAQc,EAAuBF,EAAWG,wBAAlCC,OAER1C,EAAS+B,WACT,EAAAY,EAAAC,UAASJ,GAELjB,EAAOI,UArED,GAqEa5B,GAAkB,IACvCT,EAAKK,YAAYkC,UAAUC,QAAQ,YAAa,cAChD,EAAAe,EAAAC,yBAAuB,YACrB,EAAA5B,EAAAC,cAAa,mB,GACZ7B,EAAKI,QAAQqD,kB,IAGnBf,OAAM,SAAAC,GACLC,QAAQD,MAAM,0BAA2BA,IACzC,EAAAf,EAAAC,cAAa,kB,IAEd6B,SAAQ,WACPZ,EAAOC,UAAW,C,OArExB/C,EAAKO,MAAMU,iBAAiB,QAASoC,EAAAM,UACrCC,OAAO3C,iBAAiB,UAAU,W,OAChC,EAAAoC,EAAAQ,qBAAoB7D,EAAKQ,aAAcR,EAAKO,M,KAG9C,EAAAa,EAAAC,aAAYrB,EAAKI,QAASJ,EAAKK,Y","sources":["src/load-btn.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabayApi';\nimport { clearMarkup, createCardMarkup } from './js/markupHelpers';\nimport { createNotify } from './js/notifyHelpers';\nimport { handleScrollEffects, scrollBy, scrollUp } from './js/scroll';\nimport { createLoadMoreObserver } from './js/observers';\n\nconst refs = {\n  userForm: document.getElementById('search-form'),\n  gallery: document.getElementById('gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n  upBtn: document.getElementById('button-up'),\n  fixedWrapper: document.querySelector('.form-wrapper'),\n};\n\nlet page = 1;\nconst perPage = 40;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'gallery__caption',\n  overlayOpacity: 0.9,\n  fadeSpeed: 350,\n});\n\nrefs.userForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.upBtn.addEventListener('click', scrollUp);\nwindow.addEventListener('scroll', () =>\n  handleScrollEffects(refs.fixedWrapper, refs.upBtn)\n);\n\nclearMarkup(refs.gallery, refs.loadMoreBtn);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  clearMarkup(refs.gallery, refs.loadMoreBtn);\n  const query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query || query === ' ') {\n    createNotify('info');\n    return;\n  }\n  page = 1;\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n      images.totalHits > 0 && images.hits.length > 0\n        ? createNotify('success', images.totalHits)\n        : createNotify('failure-no-matching');\n\n      if (images.totalHits > perPage && images.hits.length > 0) {\n        refs.loadMoreBtn.classList.replace('is-hidden', 'load-more');\n      }\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    });\n}\n\nfunction onLoadMore({ target }) {\n  page += 1;\n  target.disabled = true;\n  const query = refs.userForm.elements.searchQuery.value.trim();\n  const firstChild = refs.gallery.firstElementChild;\n  if (!firstChild) {\n    return;\n  }\n\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n      const { height: cardHeight } = firstChild.getBoundingClientRect();\n\n      lightbox.refresh();\n      scrollBy(cardHeight);\n\n      if (images.totalHits - page * perPage <= 0) {\n        refs.loadMoreBtn.classList.replace('load-more', 'is-hidden');\n        createLoadMoreObserver(() => {\n          createNotify('info-end-results');\n        }, refs.gallery.lastElementChild);\n      }\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    })\n    .finally(() => {\n      target.disabled = false;\n    });\n}\n"],"names":["$5IjG7","parcelRequire","$e84f18c435437d4a$var$refs","userForm","document","getElementById","gallery","loadMoreBtn","querySelector","upBtn","fixedWrapper","$e84f18c435437d4a$var$page","$e84f18c435437d4a$var$lightbox","$parcel$interopDefault","captionsData","captionDelay","captionClass","overlayOpacity","fadeSpeed","addEventListener","event","preventDefault","$9cwlI","clearMarkup","query","currentTarget","elements","searchQuery","value","trim","$hYpAF","createNotify","$9GCeT","fetchImages","then","images","insertAdjacentHTML","createCardMarkup","hits","totalHits","length","classList","replace","refresh","catch","error","console","param","target","disabled","firstChild","firstElementChild","cardHeight","getBoundingClientRect","height","$j1Fxp","scrollBy","$cE2Y3","createLoadMoreObserver","lastElementChild","finally","scrollUp","window","handleScrollEffects"],"version":3,"file":"load-btn.e144f48e.js.map"}