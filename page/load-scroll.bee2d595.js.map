{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDCAA,SAASC,EAAWC,GAClBA,EAAOC,UAAUC,OAAO,Y,CAG1B,SAASC,EAAWH,GAClBA,EAAOC,UAAUG,IAAI,Y,kBDKjBC,EAAO,CACXC,SAAUC,SAASC,eAAe,sBAClCC,QAASF,SAASC,eAAe,kBACjCE,MAAOH,SAASC,eAAe,oBAC/BG,aAAcJ,SAASK,cAAc,2BACrCC,iBAAkBN,SAASC,eAAe,qBAC1CR,OAAQO,SAASC,eAAe,WAG9BM,EAAO,EAEPC,GAAkB,EAElBC,EAAW,IAAIC,EAAApB,GAAJ,CAAmB,aAAc,CAC9CqB,aAAc,MACdC,aAAc,IACdC,aAAc,mBACdC,eAAgB,GAChBC,UAAW,MAGbjB,EAAKC,SAASiB,iBAAiB,UAQ/B,SAAkBC,GAChBA,EAAMC,kBACN,EAAAC,EAAAC,aAAYtB,EAAKI,SACjB,IAAMmB,EAAQJ,EAAMK,cAAcC,SAASC,YAAYC,MAAMC,OAC7D,IAAKL,GAAmB,MAAVA,EAGZ,OAFA,EAAAM,EAAAC,cAAa,aACb9B,EAAKQ,iBAAiBZ,UAAUG,IAAI,aAItCU,EAAO,EACPC,GAAkB,EAElBhB,EAAWM,EAAKL,SAEhB,EAAAoC,EAAAC,aAAYT,EAAOd,EAlCL,IAmCXwB,MAAK,SAAAC,GACJlC,EAAKI,QAAQ+B,mBACX,aACA,EAAAd,EAAAe,kBAAiBF,EAAOG,OAE1BH,EAAOI,UAAY,GAAKJ,EAAOG,KAAKE,OAAS,GACzC,EAAAV,EAAAC,cAAa,UAAWI,EAAOI,YAC/B,EAAAT,EAAAC,cAAa,uBAEjBnB,EAAS6B,UACTxC,EAAKQ,iBAAiBZ,UAAUC,OAAO,Y,IAExC4C,OAAM,SAAAC,GACLC,QAAQD,MAAM,0BAA8CA,IACzC,EAAnBb,EAAAC,cAAa,kB,IAEdc,SAAQ,WACP9C,EAAWE,EAAKL,QAChBe,GAAkB,C,OAzCxBV,EAAKK,MAAMa,iBAAiB,QAAS2B,EAAAC,UACrCC,OAAO7B,iBAAiB,UAAU,W,OAChC,EAAA2B,EAAAG,qBAAoBhD,EAAKM,aAAcN,EAAKK,M,KAG9C,EAAAgB,EAAAC,aAAYtB,EAAKI,UAyEjB,EAAA6C,EAAAC,yBAjCA,WACE,GAAKxC,EAAL,CAGAhB,EAAWM,EAAKL,QAChBc,GAAQ,EACR,IAAMc,EAAQvB,EAAKC,SAASwB,SAASC,YAAYC,MAAMC,QAEvD,EAAAG,EAAAC,aAAYT,EAAOd,EAjEL,IAkEXwB,MAAK,SAAAC,GACJlC,EAAKI,QAAQ+B,mBACX,aACA,EAAAd,EAAAe,kBAAiBF,EAAOG,OAG1B1B,EAAS6B,UAELN,EAAOI,UA1ED,GA0Ea7B,GAAkB,IACvCT,EAAKQ,iBAAiBZ,UAAUG,IAAI,cACpC,EAAAkD,EAAAC,yBAAuB,YACrB,EAAArB,EAAAC,cAAa,mB,GACZ9B,EAAKI,QAAQ+C,kB,IAGnBV,OAAM,SAAAC,GACLC,QAAQD,MAAM,0BAA2BA,IACzC,EAAAb,EAAAC,cAAa,kB,IAEdc,SAAQ,WACP9C,EAAWE,EAAKL,O,GA3BlB,C,GA+BiCK,EAAKQ,iB","sources":["src/load-scroll.js","src/js/loader.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabayApi';\nimport { clearMarkup, createCardMarkup } from './js/markupHelpers';\nimport { createNotify } from './js/notifyHelpers';\nimport { handleScrollEffects, scrollUp } from './js/scroll';\nimport { hideLoader, showLoader } from './js/loader';\nimport { createLoadMoreObserver } from './js/observers';\n\nconst refs = {\n  userForm: document.getElementById('search-form-scroll'),\n  gallery: document.getElementById('gallery-scroll'),\n  upBtn: document.getElementById('button-up-scroll'),\n  fixedWrapper: document.querySelector('.js-form-wrapper-scroll'),\n  loadingIndicator: document.getElementById('loading-indicator'),\n  loader: document.getElementById('loader'),\n};\n\nlet page = 1;\nconst perPage = 40;\nlet searchPerformed = false;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'gallery__caption',\n  overlayOpacity: 0.9,\n  fadeSpeed: 350,\n});\n\nrefs.userForm.addEventListener('submit', onSearch);\nrefs.upBtn.addEventListener('click', scrollUp);\nwindow.addEventListener('scroll', () =>\n  handleScrollEffects(refs.fixedWrapper, refs.upBtn)\n);\n\nclearMarkup(refs.gallery);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  clearMarkup(refs.gallery);\n  const query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query || query === ' ') {\n    createNotify('info');\n    refs.loadingIndicator.classList.add('is-hidden');\n    return;\n  }\n\n  page = 1;\n  searchPerformed = false;\n\n  showLoader(refs.loader);\n\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n      images.totalHits > 0 && images.hits.length > 0\n        ? createNotify('success', images.totalHits)\n        : createNotify('failure-no-matching');\n\n      lightbox.refresh();\n      refs.loadingIndicator.classList.remove('is-hidden');\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    })\n    .finally(() => {\n      hideLoader(refs.loader);\n      searchPerformed = true;\n    });\n}\n\nfunction loadNextPage() {\n  if (!searchPerformed) {\n    return;\n  }\n  showLoader(refs.loader);\n  page += 1;\n  const query = refs.userForm.elements.searchQuery.value.trim();\n\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n\n      lightbox.refresh();\n\n      if (images.totalHits - page * perPage <= 0) {\n        refs.loadingIndicator.classList.add('is-hidden');\n        createLoadMoreObserver(() => {\n          createNotify('info-end-results');\n        }, refs.gallery.lastElementChild);\n      }\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    })\n    .finally(() => {\n      hideLoader(refs.loader);\n    });\n}\n\ncreateLoadMoreObserver(loadNextPage, refs.loadingIndicator);\n","function showLoader(loader) {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader(loader) {\n  loader.classList.add('is-hidden');\n}\n\nexport { showLoader, hideLoader };\n"],"names":["$5IjG7","parcelRequire","$03da642c15b09e5e$export$56525cbb1fcd885c","loader","classList","remove","$03da642c15b09e5e$export$5cee2c2772922923","add","$41a02bf2d3426812$var$refs","userForm","document","getElementById","gallery","upBtn","fixedWrapper","querySelector","loadingIndicator","$41a02bf2d3426812$var$page","$41a02bf2d3426812$var$searchPerformed","$41a02bf2d3426812$var$lightbox","$parcel$interopDefault","captionsData","captionDelay","captionClass","overlayOpacity","fadeSpeed","addEventListener","event","preventDefault","$9cwlI","clearMarkup","query","currentTarget","elements","searchQuery","value","trim","$hYpAF","createNotify","$9GCeT","fetchImages","then","images","insertAdjacentHTML","createCardMarkup","hits","totalHits","length","refresh","catch","error","console","finally","$j1Fxp","scrollUp","window","handleScrollEffects","$cE2Y3","createLoadMoreObserver","lastElementChild"],"version":3,"file":"load-scroll.bee2d595.js.map"}