{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDCAA,SAASC,EAAWC,GAClBA,EAAOC,UAAUC,OAAO,Y,CAG1B,SAASC,EAAWH,GAClBA,EAAOC,UAAUG,IAAI,Y,kBDKvB,MAAMC,EAAO,CACXC,SAAUC,SAASC,eAAe,eAClCC,QAASF,SAASC,eAAe,WACjCE,MAAOH,SAASC,eAAe,aAC/BG,aAAcJ,SAASK,cAAc,iBACrCC,iBAAkBN,SAASC,eAAe,qBAC1CR,OAAQO,SAASC,eAAe,WAGlC,IAAIM,EAAO,EAEX,IAAIC,GAAkB,EAElBC,EAAW,IAAIC,EAAApB,GAAJ,CAAmB,aAAc,CAC9CqB,aAAc,MACdC,aAAc,IACdC,aAAc,mBACdC,eAAgB,GAChBC,UAAW,MAGbjB,EAAKC,SAASiB,iBAAiB,UAQ/B,SAAkBC,GAChBA,EAAMC,iBACN,MAAMC,EAAQF,EAAMG,cAAcC,SAASC,YAAYC,MAEvD,IADA,EAAAC,EAAAC,aAAY3B,EAAKI,UACZiB,GAAmB,MAAVA,EAEZ,YADA,EAAAO,EAAAC,cAAa,QAIfpB,EAAO,EACPC,GAAkB,EAClBV,EAAKQ,iBAAiBZ,UAAUC,OAAO,aAEvCH,EAAWM,EAAKL,SAEhB,EAAAmC,EAAAC,aAAYV,EAAOZ,EAlCL,IAmCXuB,MAAKC,IACJjC,EAAKI,QAAQ8B,mBACX,aACA,EAAAR,EAAAS,kBAAiBF,EAAOG,OAE1BH,EAAOI,UAAY,GAAKJ,EAAOG,KAAKE,OAAS,GACzC,EAAAV,EAAAC,cAAa,UAAWI,EAAOI,YAC/B,EAAAT,EAAAC,cAAa,uBAEjBlB,EAAS4B,SAAS,IAEnBC,OAAMC,IACLC,QAAQD,MAAM,0BAA8CA,IACzC,EAAnBb,EAAAC,cAAa,kBAAkB,IAEhCc,SAAQ,KACP7C,EAAWE,EAAKL,QAChBe,GAAkB,CAAI,G,IAxC5BV,EAAKK,MAAMa,iBAAiB,QAAS0B,EAAAC,UACrCC,OAAO5B,iBAAiB,UAAU,KAChC,EAAA0B,EAAAG,qBAAoB/C,EAAKM,aAAcN,EAAKK,UAG9C,EAAAqB,EAAAC,aAAY3B,EAAKI,UAwEjB,EAAA4C,EAAAC,yBAjCA,WACE,IAAKvC,EACH,OAEFhB,EAAWM,EAAKL,QAChBc,GAAQ,EACR,MAAMY,EAAQrB,EAAKC,SAASsB,SAASC,YAAYC,OAEjD,EAAAK,EAAAC,aAAYV,EAAOZ,EAhEL,IAiEXuB,MAAKC,IACJjC,EAAKI,QAAQ8B,mBACX,aACA,EAAAR,EAAAS,kBAAiBF,EAAOG,OAG1BzB,EAAS4B,UAELN,EAAOI,UAzED,GAyEa5B,GAAkB,IACvCT,EAAKQ,iBAAiBZ,UAAUG,IAAI,cACpC,EAAAiD,EAAAC,yBAAuB,MACrB,EAAArB,EAAAC,cAAa,mBAAmB,GAC/B7B,EAAKI,QAAQ8C,kB,IAGnBV,OAAMC,IACLC,QAAQD,MAAM,0BAA2BA,IACzC,EAAAb,EAAAC,cAAa,kBAAkB,IAEhCc,SAAQ,KACP7C,EAAWE,EAAKL,OAAO,G,GAIQK,EAAKQ","sources":["src/load-scroll.js","src/js/loader.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabayApi';\nimport { clearMarkup, createCardMarkup } from './js/markupHelpers';\nimport { createNotify } from './js/notifyHelpers';\nimport { handleScrollEffects, scrollUp } from './js/scroll';\nimport { hideLoader, showLoader } from './js/loader';\nimport { createLoadMoreObserver } from './js/observers';\n\nconst refs = {\n  userForm: document.getElementById('search-form'),\n  gallery: document.getElementById('gallery'),\n  upBtn: document.getElementById('button-up'),\n  fixedWrapper: document.querySelector('.form-wrapper'),\n  loadingIndicator: document.getElementById('loading-indicator'),\n  loader: document.getElementById('loader'),\n};\n\nlet page = 1;\nconst perPage = 40;\nlet searchPerformed = false;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'gallery__caption',\n  overlayOpacity: 0.9,\n  fadeSpeed: 350,\n});\n\nrefs.userForm.addEventListener('submit', onSearch);\nrefs.upBtn.addEventListener('click', scrollUp);\nwindow.addEventListener('scroll', () =>\n  handleScrollEffects(refs.fixedWrapper, refs.upBtn)\n);\n\nclearMarkup(refs.gallery);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  const query = event.currentTarget.elements.searchQuery.value;\n  clearMarkup(refs.gallery);\n  if (!query || query === ' ') {\n    createNotify('info');\n    return;\n  }\n\n  page = 1;\n  searchPerformed = false;\n  refs.loadingIndicator.classList.remove('is-hidden');\n\n  showLoader(refs.loader);\n\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n      images.totalHits > 0 && images.hits.length > 0\n        ? createNotify('success', images.totalHits)\n        : createNotify('failure-no-matching');\n\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    })\n    .finally(() => {\n      hideLoader(refs.loader);\n      searchPerformed = true;\n    });\n}\n\nfunction loadNextPage() {\n  if (!searchPerformed) {\n    return;\n  }\n  showLoader(refs.loader);\n  page += 1;\n  const query = refs.userForm.elements.searchQuery.value;\n\n  fetchImages(query, page, perPage)\n    .then(images => {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createCardMarkup(images.hits)\n      );\n\n      lightbox.refresh();\n\n      if (images.totalHits - page * perPage <= 0) {\n        refs.loadingIndicator.classList.add('is-hidden');\n        createLoadMoreObserver(() => {\n          createNotify('info-end-results');\n        }, refs.gallery.lastElementChild);\n      }\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error);\n      createNotify('failure-general');\n    })\n    .finally(() => {\n      hideLoader(refs.loader);\n    });\n}\n\ncreateLoadMoreObserver(loadNextPage, refs.loadingIndicator);\n","function showLoader(loader) {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader(loader) {\n  loader.classList.add('is-hidden');\n}\n\nexport { showLoader, hideLoader };\n"],"names":["$fZKcF","parcelRequire","$bdfcdc80b4c38739$export$56525cbb1fcd885c","loader","classList","remove","$bdfcdc80b4c38739$export$5cee2c2772922923","add","$b034e43c01a7420f$var$refs","userForm","document","getElementById","gallery","upBtn","fixedWrapper","querySelector","loadingIndicator","$b034e43c01a7420f$var$page","$b034e43c01a7420f$var$searchPerformed","$b034e43c01a7420f$var$lightbox","$parcel$interopDefault","captionsData","captionDelay","captionClass","overlayOpacity","fadeSpeed","addEventListener","event","preventDefault","query","currentTarget","elements","searchQuery","value","$7BhbO","clearMarkup","$fXaWX","createNotify","$eHvix","fetchImages","then","images","insertAdjacentHTML","createCardMarkup","hits","totalHits","length","refresh","catch","error","console","finally","$2YGUk","scrollUp","window","handleScrollEffects","$j7BGE","createLoadMoreObserver","lastElementChild"],"version":3,"file":"load-scroll.4c1628e1.js.map"}